import{p as S,j as y,r as p,u as H,a as I,b as V,L as q,s as T,d as x,N as W}from"./index-Vm2KpXsz.js";import{B as Q}from"./BackgroundImage-C1X0jReW.js";const U=({title:t,image:e})=>y.jsxs(X,{className:"banner",children:[y.jsx("h1",{children:t}),y.jsx(Q,{img:e})]}),X=S.section`
  position: relative;
  height: 50vh;
  width: 100%;
  overflow: hidden;

  h1 {
    width: 100%;
    padding: 0.5rem;
    background-color: rgba(0, 0, 0, 0.3);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding-inline: 5vw;
    font-family: "Dancing Script", cursive;
    font-size: clamp(5rem, 10vw, 7rem);
    text-align: center;
    line-height: 0.9;
    color: var(--contrast);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    user-select: none;
  }

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: 50% 50%;
  }
`;function v({width:t,height:e}){return t/e}function b(t,e=0){const o=10**e;return Math.round((t+Number.EPSILON)*o)/o}function Y(t){return(e,o)=>t(o)-t(e)}class J{constructor(e){this.comparator=e,this.heap=[],this.n=0}greater(e,o){return this.comparator(this.heap[e],this.heap[o])<0}swap(e,o){const n=this.heap[e];this.heap[e]=this.heap[o],this.heap[o]=n}swim(e){let o=e,n=Math.floor(o/2);for(;o>1&&this.greater(n,o);)this.swap(n,o),o=n,n=Math.floor(o/2)}sink(e){let o=e,n=o*2;for(;n<=this.n&&(n<this.n&&this.greater(n,n+1)&&(n+=1),!!this.greater(o,n));)this.swap(o,n),o=n,n=o*2}push(e){this.n+=1,this.heap[this.n]=e,this.swim(this.n)}pop(){if(this.n===0)return;this.swap(1,this.n),this.n-=1;const e=this.heap.pop();return this.sink(1),e}size(){return this.n}}function K(t,e,o){const n=new Map,s=new Set,r=new Map;r.set(e,0);const a=new J(Y(i=>i.weight));for(a.push({id:e,weight:0});a.size()>0;){const{id:i,weight:c}=a.pop();if(!s.has(i)){const l=t(i);s.add(i),l.forEach((m,u)=>{const f=c+m,d=n.get(u),h=r.get(u);(h===void 0||h>f&&(h/f>1.005||d!==void 0&&d<i))&&(r.set(u,f),a.push({id:u,weight:f}),n.set(u,i))})}}return r.has(o)?n:void 0}function Z(t,e){const o=[];for(let n=e;n!==void 0;n=t.get(n))o.push(n);return o.reverse()}function tt(t,e,o){const n=K(t,e,o);return n?Z(n,o):void 0}function et({photos:t,targetRowHeight:e,containerWidth:o}){const n=t.reduce((s,r)=>Math.min(v(r),s),Number.MAX_VALUE);return b(o/e/n)+2}function F(t,e,o,n){const s=e-(t.length-1)*o-2*n*t.length,r=t.reduce((a,i)=>a+v(i),0);return s/r}function nt(t,e,o,n,s,r,a){const i=t.slice(e,o),c=F(i,n,r,a);return c>0?(c-s)**2*i.length:void 0}function ot({photos:t,layoutOptions:e,targetRowHeight:o,limitNodeSearch:n,rowConstraints:s}){return r=>{var a,i;const{containerWidth:c,spacing:l,padding:m}=e,u=new Map;u.set(r,0);const f=(a=s==null?void 0:s.minPhotos)!=null?a:1,d=Math.min(n,(i=s==null?void 0:s.maxPhotos)!=null?i:1/0);for(let h=r+f;h<t.length+1&&!(h-r>d);h+=1){const g=nt(t,r,h,c,o,l,m);if(g===void 0)break;u.set(h,g)}return u}}function rt({photos:t,layoutOptions:e}){const{spacing:o,padding:n,containerWidth:s,targetRowHeight:r,rowConstraints:a}=e,i=et({photos:t,containerWidth:s,targetRowHeight:r}),c=ot({photos:t,layoutOptions:e,targetRowHeight:r,limitNodeSearch:i,rowConstraints:a}),l=tt(c,0,t.length);if(l===void 0)return;const m=[];for(let u=1;u<l.length;u+=1){const f=t.map((h,g)=>({photo:h,index:g})).slice(l[u-1],l[u]),d=F(f.map(({photo:h})=>h),s,o,n);m.push(f.map(({photo:h,index:g},w)=>({photo:h,layout:{height:d,width:d*v(h),index:g,photoIndex:w,photosCount:f.length}})))}return m}function R(...t){return[...t].filter(e=>!!e).join(" ")}function G(t,{width:e,photosCount:o},{spacing:n,padding:s,containerWidth:r}){const a=n*(o-1)+2*s*o;return`calc((${t} - ${a}px) / ${b((r-a)/e,5)})`}function st(t,e){return e.layout!=="rows"?`calc(100% - ${2*e.padding}px)`:G("100%",t,e)}function L(t,e,o){var n,s;return G((s=(n=t.match(/^\s*calc\((.*)\)\s*$/))==null?void 0:n[1])!=null?s:t,e,o)}function it(t,e,o){let n,s;const r=t.srcSet||t.images;return r&&r.length>0&&(n=r.concat(r.find(({width:a})=>a===t.width)?[]:[{src:t.src,width:t.width,height:t.height}]).sort((a,i)=>a.width-i.width).map(a=>`${a.src} ${a.width}w`).join(", ")),o.sizes?s=(o.sizes.sizes||[]).map(({viewport:a,size:i})=>`${a} ${L(i,e,o)}`).concat(L(o.sizes.size,e,o)).join(", "):n&&(s=`${Math.ceil(e.width/o.containerWidth*100)}vw`),{srcSet:n,sizes:s}}function A(t){var e,o;const{photo:n,layout:s,layoutOptions:r,imageProps:{style:a,className:i,...c}={},renderPhoto:l}=t,{onClick:m}=r,u={display:"block",boxSizing:"content-box",width:st(s,r),height:"auto",aspectRatio:`${n.width} / ${n.height}`,...r.padding?{padding:`${r.padding}px`}:null,...(r.layout==="columns"||r.layout==="masonry")&&s.photoIndex<s.photosCount-1?{marginBottom:`${r.spacing}px`}:null,...m?{cursor:"pointer"}:null,...a},f=m?w=>{m({event:w,photo:n,index:s.index})}:void 0,d={src:n.src,alt:(e=n.alt)!=null?e:"",title:n.title,onClick:f,style:u,className:R("react-photo-album--photo",i),loading:"lazy",decoding:"async",...it(n,s,r),...c},h=w=>{const{src:k,alt:M,srcSet:P,sizes:$,style:E,...j}=d;return p.createElement("img",{alt:M,...P?{srcSet:P,sizes:$}:null,src:k,style:w!=null&&w.wrapped?{display:"block",width:"100%",height:"100%"}:E,...j})},g=(({display:w,boxSizing:k,width:M,aspectRatio:P,padding:$,marginBottom:E,cursor:j})=>({display:w,boxSizing:k,width:M,aspectRatio:P,padding:$,marginBottom:E,cursor:j}))(u);return p.createElement(p.Fragment,null,(o=l==null?void 0:l({photo:n,layout:s,layoutOptions:r,imageProps:d,renderDefaultPhoto:h,wrapperStyle:g}))!=null?o:h())}function at({rowContainerProps:t,children:e}){return p.createElement("div",{...t},e)}function ct(t){const{layoutOptions:e,rowIndex:o,rowsCount:n,renderRowContainer:s,rowContainerProps:{style:r,className:a,...i}={},children:c}=t,l={className:R("react-photo-album--row",a),style:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"flex-start",justifyContent:"space-between",...o<n-1?{marginBottom:`${e.spacing}px`}:null,...r},...i};return p.createElement(p.Fragment,null,(s??at)({layoutOptions:e,rowIndex:o,rowsCount:n,rowContainerProps:l,children:c}))}function lt(t){const{photos:e,layoutOptions:o,renderPhoto:n,renderRowContainer:s,componentsProps:{imageProps:r,rowContainerProps:a}}=t,i=rt({photos:e,layoutOptions:o});return i?p.createElement(p.Fragment,null,i.map((c,l)=>p.createElement(ct,{key:`row-${l}`,layoutOptions:o,rowIndex:l,rowsCount:i.length,renderRowContainer:s,rowContainerProps:a},c.map(({photo:m,layout:u})=>p.createElement(A,{key:m.key||m.src,photo:m,layout:u,layoutOptions:o,renderPhoto:n,imageProps:r}))))):null}function ut(t,e,o,n){const s=new Map,r=new Set;r.add(o);for(let a=0;a<e;a+=1){const i=[...r.keys()];r.clear(),i.forEach(c=>{const l=a>0?s.get(c)[a].weight:0;t(c).forEach(({neighbor:m,weight:u})=>{let f=s.get(m);f||(f=[],s.set(m,f));const d=l+u,h=f[a+1];(!h||h.weight>d&&(h.weight/d>1.0001||c<h.node))&&(f[a+1]={node:c,weight:d}),a<e-1&&m!==n&&r.add(m)})})}return s}function dt(t,e,o){const n=[o];for(let s=o,r=e;r>0;r-=1)s=t.get(s)[r].node,n.push(s);return n.reverse()}function mt(t,e,o,n){return dt(ut(t,e,o,n),e,n)}function ht({photos:t,spacing:e,padding:o,targetColumnWidth:n,targetColumnHeight:s}){return r=>{const a=[],i=s*1.5;let c=n/v(t[r])+2*o;for(let l=r+1;l<t.length+1&&(a.push({neighbor:l,weight:(s-c)**2}),!(c>i||l===t.length));l+=1)c+=n/v(t[l])+e+2*o;return a}}function z({path:t,photos:e,containerWidth:o,columnsGaps:n,columnsRatios:s,spacing:r,padding:a}){const i=[],c=s.reduce((l,m)=>l+m,0);for(let l=0;l<t.length-1;l+=1){const m=e.map((d,h)=>({photo:d,index:h})).slice(t[l],t[l+1]),u=s.reduce((d,h,g)=>d+(n[l]-n[g])*h,0),f=(o-(t.length-2)*r-2*(t.length-1)*a-u)*s[l]/c;i.push(m.map(({photo:d,index:h},g)=>({photo:d,layout:{width:f,height:f/v(d),index:h,photoIndex:g,photosCount:m.length}})))}return i}function ft({photos:t,layoutOptions:e,targetColumnWidth:o}){const{columns:n,spacing:s,padding:r,containerWidth:a}=e,i=[],c=[];if(t.length<=n){const d=t.length>0?t.reduce((g,w)=>g+v(w),0)/t.length:1;for(let g=0;g<n;g+=1)i[g]=2*r,c[g]=g<t.length?v(t[g]):d;const h=z({path:Array.from({length:n+1}).map((g,w)=>Math.min(w,t.length)),photos:t,columnsRatios:c,columnsGaps:i,containerWidth:a,spacing:s,padding:r});return{columnsGaps:i,columnsRatios:c,columnsModel:h}}const l=(t.reduce((d,h)=>d+o/v(h),0)+s*(t.length-n)+2*r*t.length)/n,m=ht({photos:t,targetColumnWidth:o,targetColumnHeight:l,spacing:s,padding:r}),u=mt(m,n,0,t.length);for(let d=0;d<u.length-1;d+=1){const h=t.slice(u[d],u[d+1]);i[d]=s*(h.length-1)+2*r*h.length,c[d]=1/h.reduce((g,w)=>g+1/v(w),0)}const f=z({path:u,photos:t,columnsRatios:c,columnsGaps:i,containerWidth:a,spacing:s,padding:r});return{columnsGaps:i,columnsRatios:c,columnsModel:f}}function B(t){const{photos:e,layoutOptions:o}=t,{columns:n,spacing:s,padding:r,containerWidth:a}=o,i=(a-s*(n-1)-2*r*n)/n,{columnsGaps:c,columnsRatios:l,columnsModel:m}=ft({photos:e,layoutOptions:o,targetColumnWidth:i});return m.findIndex(u=>u.findIndex(({layout:{width:f,height:d}})=>f<0||d<0)>=0)>=0?n>1?B({photos:e,layoutOptions:{...o,columns:n-1}}):void 0:{columnsModel:m,columnsGaps:c,columnsRatios:l}}function pt({photos:t,layoutOptions:e}){return B({photos:t,layoutOptions:e})}function gt({columnContainerProps:t,children:e}){return p.createElement("div",{...t},e)}function wt(t){const{layoutOptions:e,columnIndex:o,columnsCount:n,columnsGaps:s,columnsRatios:r}=t,{layout:a,spacing:i,padding:c}=e;if(a==="masonry"||!s||!r)return`calc((100% - ${i*(n-1)}px) / ${n})`;const l=r.reduce((u,f)=>u+f,0),m=r.reduce((u,f,d)=>u+(s[o]-s[d])*f,0);return`calc((100% - ${b((n-1)*i+2*n*c+m,3)}px) * ${b(r[o]/l,5)} + ${2*c}px)`}function O(t){const{layoutOptions:e,renderColumnContainer:o,children:n,columnContainerProps:{style:s,className:r,...a}={},...i}=t,c={className:R("react-photo-album--column",r),style:{display:"flex",flexDirection:"column",flexWrap:"nowrap",alignItems:"flex-start",width:wt(t),justifyContent:e.layout==="columns"?"space-between":"flex-start",...s},...a};return p.createElement(p.Fragment,null,(o??gt)({layoutOptions:e,columnContainerProps:c,children:n,...i}))}function yt(t){const{photos:e,layoutOptions:o,renderPhoto:n,renderColumnContainer:s,componentsProps:{imageProps:r,columnContainerProps:a}}=t,i=pt({photos:e,layoutOptions:o});if(!i)return null;const{columnsModel:c,columnsRatios:l,columnsGaps:m}=i;return p.createElement(p.Fragment,null,c.map((u,f)=>p.createElement(O,{key:`column-${f}`,layoutOptions:o,columnIndex:f,columnsCount:c.length,columnsGaps:m,columnsRatios:l,renderColumnContainer:s,columnContainerProps:a},u.map(({photo:d,layout:h})=>p.createElement(A,{key:d.key||d.src,photo:d,layout:h,layoutOptions:o,renderPhoto:n,imageProps:r})))))}function _(t){const{photos:e,layoutOptions:o}=t,{columns:n,spacing:s,padding:r,containerWidth:a}=o,i=(a-s*(n-1)-2*r*n)/n;if(i<=0)return n>1?_({...t,layoutOptions:{...o,columns:n-1}}):void 0;const c=[];for(let m=0;m<n;m+=1)c[m]=0;return e.reduce((m,u,f)=>{const d=c.reduce((h,g,w)=>g<c[h]-1?w:h,0);return c[d]=c[d]+i/v(u)+s+2*r,m[d].push({photo:u,index:f}),m},Array.from({length:n}).map(()=>[])).map(m=>m.map(({photo:u,index:f},d)=>({photo:u,layout:{width:i,height:i/v(u),index:f,photoIndex:d,photosCount:m.length}})))}function vt(t){const{photos:e,layoutOptions:o,renderPhoto:n,renderColumnContainer:s,componentsProps:{imageProps:r,columnContainerProps:a}}=t,i=_({photos:e,layoutOptions:o});return i?p.createElement(p.Fragment,null,i.map((c,l)=>p.createElement(O,{key:`masonry-column-${l}`,layoutOptions:o,columnsCount:i.length,columnIndex:l,renderColumnContainer:s,columnContainerProps:a},c.map(({photo:m,layout:u})=>p.createElement(A,{key:m.key||m.src,photo:m,layout:u,layoutOptions:o,renderPhoto:n,imageProps:r}))))):null}function xt({containerProps:t,children:e,containerRef:o}){return p.createElement("div",{ref:o,...t},e)}function Pt(t){const{layout:e,renderContainer:o,children:n,containerRef:s,containerProps:{style:r,className:a,...i}={}}=t,c={className:R("react-photo-album",`react-photo-album--${e}`,a),style:{display:"flex",flexWrap:"nowrap",justifyContent:"space-between",flexDirection:e==="rows"?"column":"row",...r},...i};return p.createElement(p.Fragment,null,(o??xt)({containerProps:c,containerRef:s,layout:e,children:n}))}function Ct(t){const e=p.useRef(t);return(!t||!e.current||t.join()!==e.current.join())&&(e.current=t),e.current}function bt(t,{newContainerWidth:e,newScrollbarWidth:o}){const{containerWidth:n,scrollbarWidth:s}=t;return n!==void 0&&s!==void 0&&e!==void 0&&o!==void 0&&e>n&&e-n<=20&&o<s?{containerWidth:n,scrollbarWidth:o}:n!==e||s!==o?{containerWidth:e,scrollbarWidth:o}:t}function Rt(t,e){let o=t==null?void 0:t.clientWidth;if(o!==void 0&&e&&e.length>0){const n=[...e.filter(r=>r>0)].sort((r,a)=>a-r);n.push(Math.floor(n[n.length-1]/2));const s=o;o=n.find((r,a)=>r<=s||a===n.length-1)}return o}function kt(t,e){const[{containerWidth:o},n]=p.useReducer(bt,{containerWidth:e}),s=p.useRef(null),r=p.useRef();return{containerRef:p.useCallback(i=>{var c;(c=r.current)==null||c.disconnect(),r.current=void 0,s.current=i;const l=()=>n({newContainerWidth:Rt(s.current,t),newScrollbarWidth:window.innerWidth-document.documentElement.clientWidth});l(),i&&typeof ResizeObserver<"u"&&(r.current=new ResizeObserver(l),r.current.observe(i))},[t]),containerWidth:o}}const Mt=Object.freeze([1200,600,300,0]);function N(t,e){return typeof t=="function"?t(e):t}function D(t,e){return typeof t<"u"?N(t,e):void 0}function $t(t,e){const o=Mt.findIndex(n=>n<=e);return N(t[o>=0?o:0],e)}function C(t,e,o,n=0){const s=D(t,e);return Math.round(Math.max(s===void 0?$t(o,e):s,n))}function Et({layout:t,onClick:e,containerWidth:o,targetRowHeight:n,rowConstraints:s,columns:r,spacing:a,padding:i,sizes:c}){return{layout:t,onClick:e,containerWidth:o,columns:C(r,o,[5,4,3,2],1),spacing:C(a,o,[20,15,10,5]),padding:C(i,o,[0,0,0,0,0]),targetRowHeight:C(n,o,[l=>l/5,l=>l/4,l=>l/3,l=>l/2]),rowConstraints:D(s,o),sizes:c}}function jt(t,e,o){const{photos:n,componentsProps:s}=t,r=N(s,e)||{};if(o){const{layout:a,spacing:i,padding:c,rowConstraints:l}=o;if(a==="rows"){const{singleRowMaxHeight:m}=l||{};if(m){const u=Math.floor(n.reduce((f,{width:d,height:h})=>f+d/h*m-2*c,c*n.length*2+i*(n.length-1)));u>0&&(r.containerProps=r.containerProps||{},r.containerProps.style={maxWidth:u,...r.containerProps.style})}}}return r}function St(t,e,o){const{photos:n,layout:s,renderPhoto:r,renderRowContainer:a,renderColumnContainer:i}=t,c={photos:n,renderPhoto:r,componentsProps:e};return s==="rows"?p.createElement(lt,{layoutOptions:o,renderRowContainer:a,...c}):s==="columns"?p.createElement(yt,{layoutOptions:o,renderColumnContainer:i,...c}):p.createElement(vt,{layoutOptions:o,renderColumnContainer:i,...c})}function At(t){const{photos:e,layout:o,renderContainer:n,defaultContainerWidth:s,breakpoints:r}=t,{containerRef:a,containerWidth:i}=kt(Ct(r),s);if(!o||!["rows","columns","masonry"].includes(o)||!Array.isArray(e))return null;const c=i?Et({containerWidth:i,...t}):void 0,l=jt(t,i,c);return p.createElement(Pt,{layout:o,containerRef:a,renderContainer:n,containerProps:l.containerProps},c&&St(t,l,c))}const Nt=({path:t,photos:e})=>{const[o,n]=p.useState([]),[s,r]=p.useState(!0),a=H(),i=I().idAlbum,c=V(),l=u=>new Promise(f=>{const d=new Image;d.onload=()=>{f({width:d.width,height:d.height})},d.src=u}),m=p.useCallback(async(u,f)=>Promise.all(f.map(async d=>{const h=`${u}/thumbnail/${d.name}.webp`,{width:g,height:w}=await l(h);return{src:h,width:g,height:w,key:d.name}})),[]);return p.useEffect(()=>{(async()=>{const f=await m(t,e);n(f),r(!1)})()},[t,e,m]),y.jsx(p.Suspense,{fallback:y.jsx("div",{children:"Loading..."}),children:y.jsx(Wt,{children:s?y.jsx(q,{}):y.jsx(At,{layout:"masonry",photos:o,columns:u=>u<400?1:u<768?2:4,onClick:({index:u})=>{a(`/slider/${i}`),c(T(u))}})})})},Wt=S.section`
  width: 100%;
  max-width: calc(1260px + (2 * 5vw));
  padding-inline: 5vw;

  .react-photo-album--photo {
    &:hover {
      transform: scale(1.02);
      transition: transform 150ms ease-in-out;
    }
  }
`,Ft=()=>{const{idAlbum:t}=I(),[e,o]=p.useState(null),[n,s]=p.useState(x.albums[0]);p.useEffect(()=>{const i=x.albums.findIndex(c=>c.id===t);o(i),s(x.albums[i])},[t]);const r=e!==null&&e>0?x.albums[e-1]:null,a=e!==null&&e<x.albums.length-1?x.albums[e+1]:null;return y.jsxs(Lt,{children:[n&&y.jsx(U,{title:n.title,image:`../${n.path}/lowRes/${n.cover}.webp`}),y.jsxs("section",{className:"infosContainer",children:[r&&y.jsxs(W,{to:`/gallery/${r.id}`,className:"actionBtn prev",title:`Voir ${r.title}`,children:[y.jsx("i",{className:"fa-solid fa-chevron-left"}),r.title]}),a&&y.jsxs(W,{to:`/gallery/${a.id}`,className:"actionBtn next",title:`Voir ${a.title}`,children:[a.title,y.jsx("i",{className:"fa-solid fa-chevron-right"})]})]}),y.jsx(Nt,{path:n.path,photos:n.images})]})},Lt=S.main`
  .infosContainer {
    width: 100%;
    height: clamp(50px, 5vw, 75px);
    max-width: calc(1260px + (2 * 5vw));
    padding-inline: 5vw;
    position: relative;

    .actionBtn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: fit-content;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      font-weight: 500;
      &.prev {
        left: 5vw;
      }
      &.next {
        right: 5vw;
      }

      i {
        font-size: 1.3rem;
      }

      &:hover {
        color: var(--secondColor);
        transition: color 250ms ease-out;
        i {
          color: var(--secondColor);
          transition: color 250ms ease-out;
        }
      }
    }
  }
`;export{Ft as default};
